---
title: "实验：模拟Cache"
tags:
    - c++
    - cache
date: "2023-06-31"
thumbnail: "/assets/img/thumbnail/book.jpg"
bookmark: true
---

### Cache-Lab 9/20

##### P1：完成对cache信息的处理

根据命令行要求（参数）打印指定内容

1、获取参数

getopt读取argv

2、读取cache信息

根据命令行参数给定的路径打开指定文件（file open）

按行读取文本（fscanf）

根据所读信息筛选命中/未命中/次数

3、根据参数要求组织信息并打印

### 9-21 Cache原理

##### 组织结构

**tag-index-offset**

从文本读取有效信息，并解析出以上参数的对应值

**set-line-block**

根据上面的参数定位虚拟cache，并进行相应的hit、miss与evic判断

每次hit更新时间戳，使得evic时可以执行LRU策略替换cache-block

**memory-mountun**

代码优化：空间局部性&时间局部性---cache友好的代码

例：矩阵乘法：l-a * r-b = c

​					---> l-a * b = l-c

基于硬件cache思想，设计web-cache

分块技术

### 9-23 ai设想

是否可以从底层取消数据类型的限制，或者给予程序自行主动修改数据类型的能力，将底层逻辑由定义变为取象

### 9-25 cache-lab总结

##### 实验核心：

Cache的工作原理以及相应的高效利用方式

##### 工作流程：

确定实验目标--分析设计流程--逐步实现（关卡-学习相关知识-测试解决）--调试修改--总结

##### 重难点：

实验目标由粗到细的拆分

新知识的学习与尝试落实（英文、抽象的数据结构、不熟悉的函数）

调试过程的错误定位

相关知识的加深理解与灵活应用

##### 值得思考的问题

###### 知识相关

cache的不同组织结构优缺点？其思路适用于其他什么地方

还有哪些经典的基于cache优化的代码案例？

变量在堆、栈中的不同存储结构以何种规则进入cache？为什么可以用本地变量缓存数组中的值来减少cache-miss？

###### 工作相关

实验/项目中的哪些经验在工作中更有价值，还有哪些基础知识/能力最好自己提前自学完成？

如何更快更精准的定位需求并进行目标拆分？

如何更好的突破“元无知”模块？

尝试更快的调试代码/定位问题

有哪些工具可以帮助调试、构建&管理较大项目、代码逻辑

##### 下一目标：

###### Proxy-Lab：Web-Cache

在proxy代码基础上实现一个cache多线程处理大量请求
